<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../../bower_components/iron-image/iron-image.html"><link rel="import" href="../redux-state.html"><link rel="import" href="../data/data-simpledeal.html"></head><body><dom-module id="display-simpledeal-items"><template><style include="shared-styles">:host{display:block;}.container{box-sizing:border-box;width:100%;}.container[wide-layout]{padding:0px 10vw;}.box{@apply --layout-vertical;background-color:var(--sc-white);max-width:100%;box-sizing:border-box;padding:24px 30px;cursor:pointer;border-bottom:1px solid rgba(0, 0, 0, 0.1);margin:0px 10px 4px 10px;}.container[wide-layout] .box{margin:0px 0px 4px 0px;max-width:68vw;}.box:active{@apply --button-active;}.empty{width:100%;box-sizing:border-box;padding:30px 10vw;word-wrap:break-word;@apply --body-default;color:var(--sc-grey3);}.container[wide-layout] .empty{padding:0;}.top{@apply --layout-horizontal;}.avatarandmeta{@apply --layout-flex;@apply --layout-horizontal;@apply --layout-start-justified;@apply --layout-center;}.meta{@apply --layout-center-justified;@apply --layout-vertical;}.bottom{@apply --layout-horizontal;@apply --layout-end;}.avatar{width:24px;height:24px;cursor:pointer;border-radius:50%;margin-right:10px;background-size:24px;}.container[wide-layout] .avatar{width:20px;height:20px;margin-right:10px;background-size:20px;}.item-avatar-seeker{border-radius:50%;width:100%;height:100%;}.date{@apply --smallest-light;color:var(--sc-grey3b);margin-top:4px;}.replycount{@apply --small-bold;margin-top:2px;color:var(--sc-grey4);}.user{@apply --small-bold;color:var(--sc-blue);}.seeker{color:var(--sc-grey4);}.replyicon{@apply --reply-grey4-mini;}.datedescript{@apply --layout-flex;}.description{@apply --layout-vertical;@apply --layout-end-justified;@apply --body-default;color:var(--sc-grey4);padding-right:10px;}img{width:30px;height:30px;cursor:pointer;border-radius:50%;background-size:30px;}.pricebox{@apply --layout-vertical;@apply --layout-end;@apply --layout-end-justified;text-align:right;}.price{@apply --main-title4;color:var(--sc-yellow);line-height:24px;}.for{@apply --smallest-bold;color:var(--sc-yellow);}.container[wide-layout] .for{@apply --body-bold;font-size:10px;line-height:10px;}@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
            only screen and (min--moz-device-pixel-ratio: 1.5),
            only screen and (min-resolution: 240dpi){.replyicon{@apply --retina;}}</style><iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query><display-language language="{{language}}"></display-language><data-simpledeal id="sort"></data-simpledeal><div class="container" wide-layout$="{{wide}}"><template is="dom-repeat" items="{{items}}"><div tabindex="5" class="box" on-tap="_toItem"><div class="top"><div class="datedescript"><div class="description">[[item.description]]</div><div class="date">[[_formatDate(item.dateTime)]]</div></div><div class="replycount">[[_replycount(item.replies)]]</div><div class="replyicon"></div></div><div class="bottom"><div class="avatarandmeta"><div class="avatar"><iron-image class="item-avatar-seeker" sizing="cover" preload="" fade="" src="https://dev.swarm.city/img/[[item.seeker.avatarHash]]" placeholder="../images/defaultavatar.png"></iron-image></div><div class="meta"><template is="dom-if" if="[[!_isSeeker(item)]]"><div class="user">[[item.seeker.username]] · [[item.seeker.rep]] SWR</div></template><template is="dom-if" if="[[_isSeeker(item)]]"><div class="user seeker">[[item.seeker.username]] · [[item.seeker.rep]] SWR</div></template></div></div><div class="pricebox"><div class="for">SWT</div><div class="price">[[item.value]]</div></div></div></div></template></div></template><script>class MySimpledealItems extends(new ReduxMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior],Polymer.Element))){static get is(){return"display-simpledeal-items"}static get properties(){return{language:{type:String,statePath:"language"},path:{type:String,value:null,notify:!0},hashtag:{type:Object,statePath:"hashtag",observer:"_getItems"},publicKey:{type:Object,statePath:"publicKey"},items:{type:Object,value:[]},involved:{type:Boolean,value:!1},count:{type:Number,value:0,notify:!0}}}_getItems(){if(this.hashtag&&this.hashtag.address){this.$.sort.getHashtagItems(this.hashtag,this.publicKey,this.involved).then(items=>{this.set("items",items);if(this.involved){this.count=items.length}})}}_formatDate(dateTime){let milliseconds=1e3*dateTime;if(864e5>webpack.moment().valueOf()-milliseconds){return webpack.moment(milliseconds).fromNow()}else{return webpack.moment(milliseconds).format("DD MMM YYYY - HH:mm")}}_replycount(replies){return replies?replies.length:0}_toItem(event){this.path="detail/"+this.hashtag.address+"/"+event.model.__data.item.itemHash}_isSeeker(item){return item.seeker.address==this.publicKey}}window.customElements.define(MySimpledealItems.is,MySimpledealItems);</script></dom-module></body></html>