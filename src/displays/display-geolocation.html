<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../data/data-location.html"><link rel="import" href="../redux-state.html"></head><body><dom-module id="display-geolocation"><template><style>:host{display:block;}.geoloc{@apply --icon-button-big;}.geoloc:active{@apply --button-active;}.geoloc>div:nth-child(1){@apply --vmark-blue-normal;}@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
            only screen and (min--moz-device-pixel-ratio: 1.5),
            only screen and (min-resolution: 240dpi){.geoloc>div:nth-child(1){@apply --retina;}}</style><data-location id="location"></data-location><div tabindex="2" on-tap="_getLocation" on-keypress="_getLocation" class="geoloc"><div></div></div></template><script>class DisplayGeolocation extends(new ReduxMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior],Polymer.Element))){static get is(){return"display-geolocation"}static get properties(){return{loading:{type:Boolean,value:!1,notify:!0,reflectToAtribute:!0}}}static get actions(){return Object.assign({GEOHASH:function(geoHash){return{type:"GEOHASH",geoHash:geoHash}}})}_getLocation(event){if(13===event.keyCode||"tap"==event.type){this.loading=!0;this.$.location.getLocation().then(latlon=>{return this.$.location.toGeohash(latlon.latitude,latlon.longitude)}).then(data=>{this.geohash=data;this.dispatch("GEOHASH",data)}).then(()=>{window.history.back();this.loading=!1})}}}window.customElements.define(DisplayGeolocation.is,DisplayGeolocation);</script></dom-module></body></html>