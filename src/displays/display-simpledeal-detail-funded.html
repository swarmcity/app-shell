<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html"><link rel="import" href="../../bower_components/iron-image/iron-image.html"><link rel="import" href="../redux-state.html"><link rel="import" href="../shared-styles.html"><link rel="import" href="../displays/display-button-disagree.html"><link rel="import" href="../displays/display-button-confirm.html"></head><body><dom-module id="display-simpledeal-detail-funded"><template><style include="shared-styles">:host{display:block;}iron-image{height:40px;width:40px;border-radius:50%;min-height:24px;min-width:24px;margin-right:10px;}.descriptionbox{@apply --layout-horizontal;margin-top:25px;}.description{@apply --layout-flex;@apply --body-default;color:var(--sc-grey4);}.price{@apply --body-bold;text-align:right;color:var(--sc-grey4);white-space:nowrap;margin:0px 0px 0px 20px;@apply --layout-horizontal;@apply --layout-start;@apply --layout-start-justified;}.date{@apply --smallest-light;color:var(--sc-grey2);margin:4px 0px 0px 0px;}.providerbox{@apply --layout-horizontal;@apply --layout-center;@apply --layout-start-justified;margin-top:10px;}.username{@apply --small-bold;@apply --layout-flex;color:var(--sc-blue);}.vertical{@apply --layout-vertical;}.replier{@apply --small-bold;@apply --layout-flex;color:var(--sc-grey4);}.whitebox{box-sizing:border-box;padding:20px 25px 15px 25px;background-color:var(--sc-white);}.greenbox{@apply --layout-vertical;@apply --layout-center;box-sizing:border-box;padding:40px 25px 40px 25px;background-color:var(--sc-green);position:relative;}.chat-button{@apply --icon-button-big;position:absolute;top:-36px;right:50px;}.chat-button:active{@apply --button-active;}.chat-icon{@apply --chat-blue-normal;}.white-text{@apply --body-bold;font-size:14px;color:var(--sc-white);text-align:center;}.button{@apply --text-button-big;@apply --body-bold;margin:20px 0 0 0;color:var(--sc-white);width:250px;}.button:active{@apply --button-active;}.not-involved{@apply --body-default;box-sizing:border-box;padding:40px 15px;color:var(--sc-grey4);text-align:center;}.bold{@apply --body-bold;}</style><iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query><div class="container" wide-layout$="{{wide}}"><template is="dom-if" if="[[_isInvolved(hashtagItem.seeker.address, hashtagItem.provider.address, publicKey)]]"><div class="whitebox"><div class="descriptionbox"><div class="description">[[hashtagItem.provider.reply.description]]</div><div class="price">for [[_formatValue(hashtagItem.value)]] SWT</div></div><div class="date">[[_formatDate(hashtagItem.provider.reply.dateTime)]]</div><div class="providerbox"><div class="avatar"><iron-image sizing="cover" preload="" fade="" src="https://dev.swarm.city/img/[[hashtagItem.provider.reply.avatarHash]]" placeholder="../images/defaultavatar.png"></iron-image></div><template is="dom-if" if="[[_isSeeker(hashtagItem.seeker.address, publicKey)]]"><div class="username">[[hashtagItem.provider.reply.username]] · [[hashtagItem.provider.reply.reputation]] SWR</div></template><template is="dom-if" if="[[_isProvider(hashtagItem.provider.address, publicKey)]]"><div class="replier">[[hashtagItem.provider.reply.username]] · [[hashtagItem.provider.reply.reputation]] SWR</div></template></div></div><div class="greenbox"><div class="chat-button"><div class="chat-icon"></div></div><div class="white-text">You're in a deal!</div><template is="dom-if" if="[[_isSeeker(hashtagItem.seeker.address, publicKey)]]"><div class="button">payout</div></template></div></template><template is="dom-if" if="[[!_isInvolved(hashtagItem.seeker.address, hashtagItem.provider.address, publicKey)]]"><div class="whitebox not-involved"><template is="dom-if" if="[[_hasReplied(hashtagItem.replies, publicKey)]]"><div>[[hashtagItem.seeker.username]] selected a provider.</div><div class="bold">It's not you.</div></template><template is="dom-if" if="[[!_hasReplied(hashtagItem.replies, publicKey)]]"><div>[[hashtagItem.seeker.username]] already selected a provider for this request.</div></template></div></template></div></template><script>class MySimpledealDetailFunded extends(new ReduxMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior],Polymer.Element))){static get is(){return"display-simpledeal-detail-funded"}static get properties(){return{stateChange:{type:String,notify:!0},hashtagItem:{type:Object,statePath:"hashtagItem"},publicKey:{type:String,statePath:"publicKey"},path:{type:String,reflectToAttribute:!0,notify:!0},hashtag:{type:Object,statePath:"hashtag"}}}_formatValue(value){return value/1e18}_formatDate(dateTime){let milliseconds=1e3*dateTime;if(864e5>webpack.moment().valueOf()-milliseconds){return webpack.moment(milliseconds).fromNow()}else{return webpack.moment(milliseconds).format("DD MMM YYYY - HH:mm")}}_isInvolved(seekerAddress,providerAddress,userAddress){return seekerAddress==userAddress||providerAddress==userAddress}_isProvider(providerAddress,userAddress){return providerAddress==userAddress}_isSeeker(seekerAddress,userAddress){return seekerAddress==userAddress}_hasReplied(replies,userAddress){if(replies){let hasReplied=!1;for(let i=0;i<replies.length;i++){if(replies[i].address==userAddress){hasReplied=!0}}return hasReplied}}}window.customElements.define(MySimpledealDetailFunded.is,MySimpledealDetailFunded);</script></dom-module></body></html>